<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kids Sketch Pad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #sketchPad {
      border: 2px solid #000;
      background-color: #ffffff;
    }
    #currentColorDisplay {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body class="p-4">
  <div class="container text-center">
    <h2>Kids Sketch Pad</h2>

    <!-- Canvas -->
    <canvas id="sketchPad" width="500" height="300"></canvas>

    <!-- Color Buttons -->
    <div class="my-3">
      <button id="redBtn" class="btn btn-danger">Red</button>
      <button id="blueBtn" class="btn btn-primary">Blue</button>
      <button id="greenBtn" class="btn btn-success">Green</button>
      <button id="eraserBtn" class="btn btn-secondary">Eraser</button>
    </div>

    <!-- Clear Button -->
    <div class="mb-3">
      <button id="clearBtn" class="btn btn-dark">Clear Canvas</button>
    </div>

    <!-- Current Color Display -->
    <div id="currentColorDisplay">Current Color: <span id="currentColor">Black</span></div>
  </div>

  <script>
    const canvas = document.getElementById("sketchPad");
    const ctx = canvas.getContext("2d");

    // Fill white background
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Defaults
    let currentColor = "black";
    let drawing = false;
    ctx.strokeStyle = currentColor;
    ctx.lineWidth = 5;
    ctx.lineCap = "round";

    function setColor(color) {
      currentColor = color;
      ctx.strokeStyle = currentColor;
      document.getElementById("currentColor").textContent =
        currentColor.charAt(0).toUpperCase() + currentColor.slice(1);
    }

    // Buttons
    document.getElementById("redBtn").addEventListener("click", () => setColor("red"));
    document.getElementById("blueBtn").addEventListener("click", () => setColor("blue"));
    document.getElementById("greenBtn").addEventListener("click", () => setColor("green"));
    document.getElementById("eraserBtn").addEventListener("click", () => setColor("white"));
    document.getElementById("clearBtn").addEventListener("click", () => {
      ctx.fillStyle = "#ffffff";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = currentColor; // restore fillStyle
    });

    function getPos(e) {
      const rect = canvas.getBoundingClientRect();
      return { x: e.clientX - rect.left, y: e.clientY - rect.top };
    }

    function startDraw(e) {
      drawing = true;
      const { x, y } = getPos(e);
      ctx.beginPath();
      ctx.moveTo(x, y);
      // FIX: draw a dot immediately at start position (covers (50,50))
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    function draw(e) {
      if (!drawing) return;
      const { x, y } = getPos(e);
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    function stopDraw() {
      drawing = false;
      ctx.beginPath();
    }

    canvas.addEventListener("mousedown", startDraw);
    canvas.addEventListener("mousemove", draw);
    canvas.addEventListener("mouseup", stopDraw);
    canvas.addEventListener("mouseleave", stopDraw);
  </script>
</body>
</html>
